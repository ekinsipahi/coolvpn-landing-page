{% load i18n static %}

<section id="pricing" class="relative isolate overflow-hidden bg-white dark:bg-neutral-950 py-16 md:py-24">

  {# Arka plan bulutları #}
  <div class="pointer-events-none absolute inset-0 -z-10">
    <div class="absolute -top-24 -left-28 h-72 w-72 rounded-full blur-3xl bg-rose-300/35 dark:bg-rose-400/25"></div>
    <div class="absolute -bottom-24 -right-20 h-80 w-80 rounded-full blur-3xl bg-fuchsia-300/30 dark:bg-fuchsia-400/20"></div>
    <div class="absolute top-1/2 left-1/3 -translate-x-1/2 -translate-y-1/2 h-64 w-64 rounded-full blur-3xl bg-indigo-300/25 dark:bg-indigo-400/15"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-white via-white/70 to-white dark:from-black dark:via-black/60 dark:to-black"></div>
  </div>

  <div class="max-w-screen-xl mx-auto px-6">
    <div class="text-center mb-10 md:mb-12">
      <span class="inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium
                   bg-rose-600/10 border-rose-600/30 text-rose-700
                   dark:bg-rose-500/10 dark:border-rose-400/30 dark:text-rose-300">
        {% trans "Premium" %}
      </span>
      <h2 class="mt-4 text-3xl md:text-5xl font-semibold tracking-tight text-gray-900 dark:text-gray-100">
        {% trans "Pricing that feels light." %}
      </h2>
      <p class="mt-3 md:mt-4 text-base md:text-lg text-gray-700/90 dark:text-gray-300/90 leading-relaxed">
        {% blocktrans trimmed %}Pick a plan now — email comes later at payment. Clean, fast, private.{% endblocktrans %}
      </p>
    </div>

    {# Bird sprite (gövde + ayrı kanat) #}
    <svg class="hidden">
      <symbol id="icon-bird" viewBox="0 0 32 32">
        <path d="M16 4c5 0 9 4 9 9 0 1.3-.27 2.6-.8 3.7l3.3 2.2c.5.3.3 1-.3 1.1l-3.9.3c-1.8 2.9-5 4.7-8.6 4.7-5.5 0-10-4.5-10-10S10.5 4 16 4z" fill="currentColor"/>
        <circle cx="18.5" cy="12" r="1.2" fill="#111"/>
        <path d="M22 14l3-1.2-2.2 2.7z" fill="#111"/>
        <g class="bird-wing" transform="translate(13,14)">
          <path d="M0 0 C 3 -2, 7 -2, 9 1 C 7 2, 3 2, 0 0 Z" fill="currentColor"/>
        </g>
      </symbol>
    </svg>

    <style>
      /* Kuşlar */
      @keyframes bird-bob { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-2px) } }
      @keyframes wing-flap { 0%,100% { transform: translate(13px,14px) rotate(0deg) } 50% { transform: translate(13px,14px) rotate(-18deg) } }
      .bird-anim { animation: bird-bob 2.6s ease-in-out infinite }
      .group:hover .bird-anim { animation-duration: 1.6s } /* hover’da biraz hızlan */
      .bird-wing { transform-origin: 13px 14px; animation: wing-flap 1.2s ease-in-out infinite }
      .group:hover .bird-wing { animation-duration: 0.8s }
      .bird-row svg { filter: drop-shadow(0 1px 0 rgba(0,0,0,.06)) }

      /* Kart arka planı: animated gradient */
      @keyframes bg-pan {
        0% { background-position: 0% 50% }
        50% { background-position: 100% 50% }
        100% { background-position: 0% 50% }
      }
      .card-bg::before{
        content:"";
        position:absolute; inset:-1px; z-index:0; border-radius: 1rem;
        background: linear-gradient(120deg,
                    rgba(255,182,193,.35),
                    rgba(244,114,182,.35),
                    rgba(167,139,250,.35));
        background-size: 200% 200%;
        opacity:.0; transition: opacity .35s ease, transform .35s ease;
        animation: bg-pan 10s ease-in-out infinite;
        filter: blur(14px);
        transform: scale(0.98);
      }
      .group:hover .card-bg::before{ opacity:.6; transform: scale(1) }
    </style>

    {# GRID: mobile=1, sm=2, lg=3 #}
    <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 items-stretch">

      {# MONTHLY — 5 devices #}
      <article class="group relative h-full rounded-2xl overflow-hidden ring-1 ring-rose-300/40 dark:ring-rose-300/25
                      bg-rose-50/60 dark:bg-rose-300/[0.06] backdrop-blur shadow-sm transition-all duration-300 ease-out hover:shadow-rose-500/30 hover:-translate-y-1">
        <div class="card-bg"></div>

        <div class="h-16 relative z-10">
          <video class="abs-video pointer-events-none absolute inset-0 h-full w-full object-cover opacity-85"
                 playsinline muted loop preload="metadata" poster="{% static 'img/ribbons/monthly.jpg' %}">
            <source src="{% static 'videos/ribbons/bird-1.webm' %}" type="video/webm">
          </video>
        </div>

        <div class="p-6 flex flex-col relative z-10">
          <div class="flex items-start justify-between gap-4">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 tracking-tight">{% trans "Monthly" %}</h3>
              <div class="mt-1 text-3xl md:text-4xl font-extrabold leading-none
                          bg-gradient-to-r from-gray-900 via-rose-700 to-gray-900 dark:from-white dark:via-rose-300 dark:to-white
                          bg-clip-text text-transparent transition-all duration-300 group-hover:tracking-wide">
                <span class="align-top text-lg md:text-xl">{{ ui_currency_symbol }}</span> {{ui_monthly}}
                <span class="ml-1 text-sm md:text-base font-normal text-gray-700/90 dark:text-gray-300/90">/ {% trans "month" %}</span>
              </div>
              <p class="mt-1 text-xs uppercase tracking-wider text-rose-700/80 dark:text-rose-300/80">{% trans "5 devices included" %}</p>
            </div>
          </div>

          <div class="mt-3 flex items-center gap-1.5 bird-row" aria-hidden="true">
            {% with birds="12345" %}
              {% for _ in birds|make_list %}
                <svg class="bird-anim h-6 w-6 text-rose-500/90 dark:text-rose-300/90" viewBox="0 0 32 32"><use href="#icon-bird"/></svg>
              {% endfor %}
            {% endwith %}
          </div>

          <ul class="mt-4 flex-1 text-sm text-gray-800/95 dark:text-gray-300 space-y-1.5 leading-relaxed">
            <li>✓ {% trans "Auto-connect on startup" %}</li>
            <li>✓ {% trans "Kill Switch" %}</li>
            <li>✓ {% trans "Built-in Ad & Tracker Blocker" %}</li>
            <li>✓ {% trans "Zero logs" %}</li>
            <li>✓ {% trans "100% anonymous" %}</li>
            <li>✓ {% trans "1000 Gbps network core" %}</li>
            <li>✓ {% trans "Per-tab routing for Chrome" %}</li>
            <li>✓ {% trans "DPI inspection bypass" %}</li>
            <li>⭐ {% trans "Premium server access" %}</li>
          </ul>

          <a href="/payment?plan=monthly"
             class="mt-6 inline-flex w-full items-center justify-center rounded-xl px-4 py-2
                    text-white bg-gray-900 hover:bg-gray-800 active:bg-black
                    dark:bg-white dark:text-black dark:hover:bg-white/90 transition-all duration-300">
            <span class="transition-transform duration-300 group-hover:translate-x-0.5">{% trans "Choose Monthly" %}</span>
            <svg class="ml-2 h-5 w-5 rtl:rotate-180 transition-transform duration-300 group-hover:translate-x-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
          </a>
        </div>
      </article>

      {# SEMI — 10 devices #}
      <article class="group relative h-full rounded-2xl overflow-hidden ring-1 ring-fuchsia-300/40 dark:ring-fuchsia-300/25
                      bg-fuchsia-50/60 dark:bg-fuchsia-300/[0.06] backdrop-blur shadow-sm transition-all duration-300 ease-out hover:shadow-fuchsia-500/30 hover:-translate-y-1">
        <div class="card-bg"></div>

        <div class="h-16 relative z-10">
          <video class="abs-video pointer-events-none absolute inset-0 h-full w-full object-cover opacity-90"
                 playsinline muted loop preload="metadata" poster="{% static 'img/ribbons/semi.jpg' %}">
            <source src="{% static 'videos/ribbons/bird-2.webm' %}" type="video/webm">
            <source src="{% static 'videos/ribbons/bird-2.mp4' %}" type="video/mp4">
          </video>
        </div>

        <div class="p-6 flex flex-col relative z-10">
          <div class="flex items-start justify-between gap-4">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 tracking-tight">{% trans "6 Months" %}</h3>
              <div class="mt-1 text-3xl md:text-4xl font-extrabold leading-none
                          bg-gradient-to-r from-gray-900 via-fuchsia-700 to-gray-900 dark:from-white dark:via-fuchsia-300 dark:to-white
                          bg-clip-text text-transparent transition-all duration-300 group-hover:tracking-wide">
                <span class="align-top text-lg md:text-xl">{{ ui_currency_symbol }}</span> {{ ui_semiannual }}
                <span class="ml-1 text-sm md:text-base font-normal text-gray-700/90 dark:text-gray-300/90">/ {% trans "6 months" %}</span>
              </div>
              <p class="mt-1 text-xs uppercase tracking-wider text-fuchsia-700/80 dark:text-fuchsia-300/80">{% trans "10 devices included" %}</p>
            </div>
          </div>

          <div class="mt-3 grid grid-cols-5 gap-1.5 bird-row" aria-hidden="true">
            {% with birds="12345" %}
              {% for _ in birds|make_list %}<svg class="bird-anim h-5 w-5 text-rose-500/90 dark:text-rose-300/90"><use href="#icon-bird"/></svg>{% endfor %}
              {% for _ in birds|make_list %}<svg class="bird-anim h-5 w-5 text-fuchsia-500/90 dark:text-fuchsia-300/90"><use href="#icon-bird"/></svg>{% endfor %}
            {% endwith %}
          </div>

          <ul class="mt-4 flex-1 text-sm text-gray-800/95 dark:text-gray-300 space-y-1.5 leading-relaxed">
            <li>✓ {% trans "Auto-connect on startup" %}</li>
            <li>✓ {% trans "Kill Switch" %}</li>
            <li>✓ {% trans "Built-in Ad & Tracker Blocker" %}</li>
            <li>✓ {% trans "Zero logs" %}</li>
            <li>✓ {% trans "100% anonymous" %}</li>
            <li>✓ {% trans "1000 Gbps network core" %}</li>
            <li>✓ {% trans "Per-tab routing for Chrome" %}</li>
            <li>✓ {% trans "DPI inspection bypass" %}</li>
            <li>⭐ {% trans "Premium server access" %}</li>
          </ul>

          <a href="/payment?plan=semi"
             class="mt-6 inline-flex w-full items-center justify-center rounded-xl px-4 py-2
                    text-white bg-rose-600 hover:bg-rose-500 active:bg-rose-700 transition-all duration-300">
            <span class="transition-transform duration-300 group-hover:translate-x-0.5">{% trans "Choose 6-Month" %}</span>
            <svg class="ml-2 h-5 w-5 rtl:rotate-180 transition-transform duration-300 group-hover:translate-x-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
          </a>
        </div>
      </article>

      {# ANNUAL — 20 devices + dedicated #}
      <article class="group relative h-full rounded-2xl overflow-hidden ring-1 ring-indigo-300/40 dark:ring-indigo-300/25
                      bg-indigo-50/60 dark:bg-indigo-300/[0.06] backdrop-blur shadow-sm transition-all duration-300 ease-out hover:shadow-indigo-500/30 hover:-translate-y-1">
        <div class="card-bg"></div>

        <div class="h-16 relative z-10">
          <video class="abs-video pointer-events-none absolute inset-0 h-full w-full object-cover opacity-95"
                 playsinline muted loop preload="metadata" poster="{% static 'img/ribbons/annual.jpg' %}">
            <source src="{% static 'videos/ribbons/bird-3.webm' %}" type="video/webm">
            <source src="{% static 'videos/ribbons/bird-3.mp4' %}" type="video/mp4">
          </video>
        </div>

        <div class="p-6 flex flex-col relative z-10">
          <div class="flex items-start justify-between gap-4">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 tracking-tight">{% trans "Annual" %}</h3>
              <div class="mt-1 text-3xl md:text-4xl font-extrabold leading-none
                          bg-gradient-to-r from-gray-900 via-indigo-700 to-gray-900 dark:from-white dark:via-indigo-300 dark:to-white
                          bg-clip-text text-transparent transition-all duration-300 group-hover:tracking-wide">
                <span class="align-top text-lg md:text-xl">{{ ui_currency_symbol }}</span> {{ ui_annual }}
                <span class="ml-1 text-sm md:text-base font-normal text-gray-700/90 dark:text-gray-300/90">/ {% trans "year" %}</span>
              </div>
              <p class="mt-1 text-xs uppercase tracking-wider text-indigo-700/80 dark:text-indigo-300/80">{% trans "20 devices included" %}</p>
            </div>
          </div>

          <div class="mt-3 grid grid-cols-5 gap-1.5 bird-row" aria-hidden="true">
            {% with birds="12345" %}
              {% for _ in birds|make_list %}<svg class="bird-anim h-5 w-5 text-rose-500/90 dark:text-rose-300/90"><use href="#icon-bird"/></svg>{% endfor %}
              {% for _ in birds|make_list %}<svg class="bird-anim h-5 w-5 text-fuchsia-500/90 dark:text-fuchsia-300/90"><use href="#icon-bird"/></svg>{% endfor %}
              {% for _ in birds|make_list %}<svg class="bird-anim h-5 w-5 text-indigo-500/90 dark:text-indigo-300/90"><use href="#icon-bird"/></svg>{% endfor %}
              {% for _ in birds|make_list %}<svg class="bird-anim h-5 w-5 text-rose-500/90 dark:text-rose-300/90"><use href="#icon-bird"/></svg>{% endfor %}
            {% endwith %}
          </div>

          <ul class="mt-4 flex-1 text-sm text-gray-800/95 dark:text-gray-300 space-y-1.5 leading-relaxed">
            <li>✓ {% trans "Auto-connect on startup" %}</li>
            <li>✓ {% trans "Kill Switch" %}</li>
            <li>✓ {% trans "Built-in Ad & Tracker Blocker" %}</li>
            <li>✓ {% trans "Zero logs" %}</li>
            <li>✓ {% trans "100% anonymous" %}</li>
            <li>✓ {% trans "1000 Gbps network core" %}</li>
            <li>✓ {% trans "Per-tab routing for Chrome" %}</li>
            <li>✓ {% trans "DPI inspection bypass" %}</li>
            <li>⭐ {% trans "Premium server access" %}</li>
            <li>⭐ {% trans "Dedicated private server (Annual+)" %}</li>
          </ul>

          <a href="/payment?plan=annual"
             class="mt-6 inline-flex w-full items-center justify-center rounded-xl px-4 py-2
                    text-white bg-fuchsia-600 hover:bg-fuchsia-500 active:bg-fuchsia-700 transition-all duration-300">
            <span class="transition-transform duration-300 group-hover:translate-x-0.5">{% trans "Choose Annual" %}</span>
            <svg class="ml-2 h-5 w-5 rtl:rotate-180 transition-transform duration-300 group-hover:translate-x-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
          </a>
        </div>
      </article>

    </div>
  </div>
</section>

<script>
  // Video play/pause viewport'a göre
  document.addEventListener('DOMContentLoaded', () => {
    const vids = document.querySelectorAll('.abs-video');
    const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReduced) { vids.forEach(v => { v.pause(); v.removeAttribute('autoplay'); v.removeAttribute('loop'); v.style.opacity = 0.6; }); return; }
    const io = new IntersectionObserver((entries) => {
      entries.forEach(({isIntersecting, target}) => { if (isIntersecting) target.play().catch(()=>{}); else target.pause(); });
    }, { threshold: 0.25 });
    vids.forEach(v => io.observe(v));
  });
</script>
